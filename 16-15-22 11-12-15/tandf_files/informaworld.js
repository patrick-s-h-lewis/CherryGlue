var CWParser_informaworld={name:"Taylor & Francis Online",webPageAsObject:!1,extractReference:!0,getSearchQuery:function(e){try{Utility.validateArgs(e)||(e=Callbacks);var t=CwZ("form[name='quickSearchLineForm']");t.length>0&&t.find("input#XuiTxtSubjectSearch").length>0?e.success(t.find("input#XuiTxtSubjectSearch").val()):e.success("")}catch(a){e.success(""),Utility.log(a)}},next:function(e){Utility.validateArgs(e)||(e=Callbacks);try{var t=CwZ(".paginationLinks li.next a");t.length>0?(e.success(!0),setTimeout(function(){window.location.href=t[0].href},500)):e.success(!1)}catch(a){e.success(!1),Utility.log(a)}},parsePDFText:function(e,t,a,i,n,r,l,o,d,s){var f=i,c="",p=!1,w="";f=f.replace(/,/g,"").trim();var u=f.length,h=f.lastIndexOf("(");u-1!=h&&-1!=h&&(f=f.substr(h+1,u)),c=f,p=/^(\d{4}[a-z]?)$/.test(r),w=r;var C=-1;if(p)C=this.searchReference(s,w,c),-1!=C?CWComManager.tell("referenceID",{referenceId:C,annotLinkX:o,annotLinkY:d,dest:l,view:"pdfFrame"},"pdfFrame"):CWComManager.tell("referenceID",{referenceId:l,view:"pdfFrame"},"pdfFrame");else{var g=r.replace(/\d*/g,""),m=r.replace(/.*?(\d{4}).*/g,"$1");if(C=this.searchReference(s,m,g),-1!=C)CWComManager.tell("referenceID",{referenceId:C,annotLinkX:o,annotLinkY:d,view:"pdfFrame"},"pdfFrame");else{var b=r.match(/(\[|\()\d+(\]|\))/g);b?(C=b[0].replace(/(\[|\]|\(|\))/g,""),CWComManager.tell("referenceID",{referenceId:C,annotLinkX:o,annotLinkY:d,view:"pdfFrame"},"pdfFrame")):CWComManager.tell("referenceID",{referenceId:l,view:"pdfFrame"},"pdfFrame")}}},searchReference:function(e,t,a){var i=-1;if(e.hasOwnProperty(t))if(Object.keys(e[t]).length>1){var n={};a=a.replace(" et al.","").replace(/[&|;|(|)|,|"]/g,""),a=a.replace(" and "," ").replace("  "," "),a=a.replace(/([a-z])([A-Z])/g,"$1 $2");var r=a.split(" ");for(var l in e[t])n[Utility.matchAuthors(r,e[t][l])]=l;i=n[Object.keys(n)[Object.keys(n).length-1]]}else i=Object.keys(e[t])[0];return i},getReference:function(e){var t=[],a=e.find(".summationSection ul.references li");if(void 0!=a&&a.length>0)CwZ(a).each(function(e){var a={};if(a.id=e+1,a.title="",a.journal="",a.author="",CwZ(this).find("pub-id[pub-id-type]").length>0)a.author=CwZ(this).contents()[1].textContent.replace(/(.*?)\..*/,"$1"),a.title=CwZ(this).contents()[1].textContent.replace(a.author,"").replace(/(.*)(\.|\?).*/,"$1"),a.journal=CwZ(this).contents()[1].textContent.replace(a.author,"").replace(/(.*)\.(.*)/,"$2"),a.journal&&""!=a.journal&&(a.journal=a.journal.replace(/\(|\)/g,"")),a.doi=CwZ(this).find("pub-id[pub-id-type=doi]").text();else{var i="";CwZ(this).contents().length>=4&&(CwZ(this).contents()[3].textContent.replace(/[^a-zA-Z]+/g,"").length>5?(i=CwZ(this).contents()[3].textContent,a.author=CwZ(this).contents()[1].textContent):(i=CwZ(this).contents()[1].textContent,a.author=CwZ(this).contents()[1].textContent.replace(/(.*?)\..*/,"$1"))),CwZ(this).contents().length>=4&&(a.title=i.replace(/.*?\.(.*?)\..*/,"$1")),a.title&&""==a.title.replace(/\s*/,"")&&(a.title=CwZ(this).find("i").text()),CwZ(this).contents().length>=4&&(a.journal=i.replace(a.title,"").replace(a.author,"").replace(/.*?\.(.*?)\.(.*?)\..*/,"$2").replace(/[\.\d*\(\):-]+/g,"")),CwZ.trim(a.title)!=CwZ.trim(a.journal)&&""!=CwZ.trim(a.journal)||!CwZ(this).find("i").length||(a.journal=CwZ(this).find("i").text()),CwZ(this).find("a").length&&CwZ(this).find("a:first").attr("href").indexOf("key")>0&&CwZ(this).find("a:first").attr("href").match(/.*key=(10\..*?)($|&).*/)&&(a.doi=decodeURIComponent(CwZ(this).find("a:first").attr("href").replace(/.*key=(.*?)($|&).*/,"$1"))),""==CwZ.trim(a.title)&&CwZ(this).find("chapter-title").length&&(a.title=CwZ.trim(CwZ(this).find("chapter-title").text()))}CwZ(this).find(".NLM_year").length?a.year=CwZ(this).find(".NLM_year").text().replace(/[\. \(\):-]+/g,""):a.year=CwZ(this).text().replace(/(\r\n|\n|\r)/gm,"").replace(/.*?(\d{4}).*/,"$1");var n=new RegExp(String.fromCharCode(8220)+"|"+String.fromCharCode(8221)+"|"+String.fromCharCode(8211),"g");a.title=CwZ.trim(a.title.replace(n,"").replace(/(.*?)([a-zA-Z0-9 ].*)/,"$2").replace(/[\.\d*\(\):-]+/g,"")),a.journal=CwZ.trim(a.journal.replace(n,"").replace(/(.*?)([a-zA-Z0-9 ].*)/,"$2").replace(/[\.\d*\(\):-]+/g,"")),a.author=a.author.replace(/[\.\(\):]+/g,""),""==a.title||","!=a.title[0]&&"."!=a.title[0]&&";"!=a.title[0]||(a.title=a.title.substring(1,a.title.length)),""==a.journal||","!=a.journal[0]&&"."!=a.journal[0]&&";"!=a.journal[0]||(a.journal=a.journal.substring(1,a.journal.length)),(""==a.title||""==a.author||a.title.replace(/[^a-zA-Z]/g,"").length<=3)&&(a.bad=!0,a.refText=CwZ(this).text().replace(/(\d+\.)(.*)/,"$2")),t.push(a)});else{var i={};i.refsNotFound=!0,t.push(i)}return t},search:function(e){Utility.validateArgs(e)||(e=Callbacks);try{var t=CwZ("form[name='quickSearchLineForm']");t.length>0?(CwZ("input#XuiTxtSubjectSearch").val(e.query),e.success(!0),setTimeout(function(){t.submit()},100)):e.success(!1)}catch(a){e.success(!1),Utility.log(a)}},injectLink:function(e){try{var t=CwZ(".accessmodule");if(t.length&&!t.hasClass(".cw-done")){t.closest(".gutter").addClass("cw-tandf-a");this.getFilter();if(CWParser_informaworld.isPubPage()){var a=CwZ("#breadcrumb a:contains('List of Issues')").attr("href");if(a=a.replace("/loi/",""),Utility.filter(a,"informaworld")){var i=CwZ(".pdf")[0].href;!t.hasClass("cw-done")&&i&&i.length>0&&(Utility.log(i),t.prepend(e.addButton({pdfUrl:i,index:0,inline:!1,"class":"btn-tandf"})),t.addClass("cw-done"),Utility.log("link injected"))}}else if(CWParser_informaworld.isListingPage()){var a=CwZ("#breadcrumb a:contains('List of Issues')").attr("href");a=a.replace("/loi/",""),Utility.filter(a,"informaworld")&&CwZ(".article").each(function(t){var a=CwZ(this);if(a.find(".pdf").length>0){var i=a.find("a[href*='pdf']")[0].href,n=a.find(".accessmodule");n.closest(".gutter").addClass("cw-tandf-a"),!n.hasClass("cw-done")&&i&&i.length>0&&(n.addClass("cw-done"),n.prepend(e.addButton({pdfUrl:i,index:t,inline:!1,"class":"btn-tandf"})))}})}else CWParser_informaworld.isSearchingPage()&&CwZ(".bd").each(function(t){var a=CwZ(this);if(a.find(".resultTitle").length>0){var i=a.find("a.searchResultJournal").attr("href").replace("/toc/","");if(i=i.substr(0,i.lastIndexOf("/")),Utility.filter(i,"informaworld")&&a.find(".filesLinks").length>0){var n=a.find("a[href*='pdf']")[0].href,r=a.find(".accessmodule");r.closest(".gutter").addClass("cw-tandf-a"),!r.hasClass("cw-done")&&n&&n.length>0&&(Utility.log(n),r.prepend(e.addButton({pdfUrl:n,index:t,inline:!1,"class":"btn-tandf"})),r.addClass("cw-done"))}}if(CwZ(".iconLabel").length>0){var l=CwZ(".iconLabel");l.addClass("cw-tandf-b")}})}e.success(CwZ(".cw-btnContainer").length)}catch(n){Utility.log(n)}},isSearchingPage:function(){var e=this.webPageAsObject?this.webPageAsObject.html.find("body"):CwZ("body");return e.find("#standardResults").length>0||e.find("#oaArticles .bd").length>0},isListingPage:function(){var e=this.webPageAsObject?this.webPageAsObject.html.find("body"):CwZ("body");return e.find(".article").length>0||e.find(".topArticleDisplay").length>0},isPubPage:function(){var e=this.webPageAsObject?this.webPageAsObject.html.find("body"):CwZ("body");return e.find(".pageArticle").length>0},parsePage:function(e){function t(e){var t=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./),a=navigator.userAgent.indexOf("MSIE")>0?!0:!1,i=a||t?"btns_bold_face-IE":"btns_bold_face";if(/cogentoa/.test(r)){var n='<a class="showDownloadPopup" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a>',l=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0");m=CwZ("#DownloadOptionsContainer");var o=CwZ(m).find("#DownloadOptions a").eq(0).text(),d=CwZ(m).find("#DownloadOptions a").get(0);n=n.replace("@@btntext@@",o),n=n.replace("@@pdfLink@@",l),CwZ(n).insertBefore(CwZ("#DownloadOptions .dropdown-toggle")),CwZ(m).find(".showDownloadPopup").data("metadata",e),CwZ(d).remove()}else if(0==CwZ(".showDownloadPopup").length){var n='<div class="showDownloadPopup-detail'+i+'"><a class="showDownloadPopup pdf" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',l=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0"),o=CwZ(m).find(".pdf").text(),s=CwZ(m).find(".pdf").index(),d=CwZ(m).find(".pdf");n=n.replace("@@btntext@@",o),n=n.replace("@@pdfLink@@",l),CwZ(n).insertBefore(CwZ(".accessmodule").children().eq(s)),CwZ(m).find(".showDownloadPopup").data("metadata",e),CwZ(d).remove(),m=CwZ(".top_article_links"),n='<div class="showDownloadPopup-detail'+i+'"><a class="showDownloadPopup pdf" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',o=CwZ(m).find(".pdf").text(),s=CwZ(m).find(".pdf").closest("li").index(),d=CwZ(m).find(".pdf"),n=n.replace("@@btntext@@",o),n=n.replace("@@pdfLink@@",l),CwZ(m).children().eq(s).append(n),CwZ(m).find(".showDownloadPopup").data("metadata",e),CwZ(d).remove()}}Utility.validateArgs(e)||(e=Callbacks);var a=CWParser_informaworld,i=[];parsedHtml=!1,a.webPageAsObject=e.webPageAsObject||!1,a.webPageAsObject&&(parsedHtml=a.webPageAsObject.html=CwZ(Utility.parseHTML(a.webPageAsObject.data)));var n=Utility.getPageDomain(this.webPageAsObject.url),r=document.domain.replace(/[\.-]/g,"");if(a.isPubPage())try{var l="",o="",d="",s="",f="",c="",p="",w="",u="",h="",C=CwZ("#breadcrumb a:contains('List of Issues')").attr("href")||CwZ("#JournalNavigator ul li a:contains(All volumes & issues)").attr("href"),g=CwZ(".accessmodule").hasClass("access_free");C&&(C=C.replace("/loi/","")),l=Utility.trim(CwZ(".description h1").text())||Utility.trim(CwZ("#ArticleInfo h1").text()),o=CwZ(".doiMeta a").map(function(){return CwZ(this).attr("href").indexOf("authors")>=0?Utility.trim(CwZ(this).text()):void 0}).get().join("; "),o||(o=Utility.selectorAttributeGetter("meta[name='dc.Creator']","content",!1,"; ")),c=Utility.trim(CwZ(".doiMeta dl dd").text().replace(/(^.*DOI:)([a-zA-Z0-9_.\/-]+)?$/g,"$2"))||CwZ("meta[scheme=doi]").attr("content")||Utility.trim(CwZ(".articleInfoDOI").eq(0).text().replace(/(^.*DOI)([a-zA-Z0-9_.\/]+)?$/g,"$2")),p="doi";var m=CwZ(".accessmodule:first").length?CwZ(".accessmodule:first"):CwZ("#DownloadOptions").length?CwZ("#DownloadOptions"):null,b="";b=/cogentoa/.test(r)?(CwZ(m).find("a:contains('PDF')").attr("href").indexOf("http")>-1?"":n)+CwZ(m).find("a:contains('PDF')").attr("href"):(CwZ(m).find(".pdf").attr("href").indexOf("http")>-1?"":n)+CwZ(m).find(".pdf").attr("href"),b=b.split("#")[0].replace("/abs/","/pdf/"),d=b,f=b.replace("/doi/pdf/","/doi/abs/"),s=b.replace("/doi/pdf/","/doi/ref/"),w=n+"/action/downloadCitation?doi="+encodeURIComponent(c)+"&include=ref&direct=true&format=ris&submit=Download+article+citation+data",u="ris",T=Utility.trim(CwZ(".gutter table h2").text());var Z=Utility.selectorAttributeGetter("meta[name='dc.Date']","content");Z&&(h=new Date(Z).getFullYear());var v=new CWMetaData({title:l,authors:o,identifier:c,identifierType:p,pubLink:f,refLink:s,pdfLink:d,dataUrl:w,type:u,journal:T,openaccess:g,year:h});i.push(v);var y=m.find(".showDownloadPopup,.cw-btnContainer");0==y.length&&(/tandfonlinecom/.test(r)||/tandfqaliteratumonlinecom/.test(r)||/tandftestliteratumonlinecom/.test(r)?Utility.filter(n,C,"informaworld")&&(m.find(".accessIconWrapper").before(e.addButton({pdfUrl:d,index:0,inline:!0,"class":" tandf-detail tip_bm",buttonCB:t,metaData:v})),""==d&&m.find("a.cw-openPdfReader").hide(),m.find(".cw-btnContainer").data("metadata",v)):(m.find(".accessIconWrapper").before(e.addButton({pdfUrl:d,index:0,inline:!0,"class":" tandf-detail tip_bm"})),""==d&&m.find("a.cw-openPdfReader").hide(),m.find(".cw-btnContainer").data("metadata",v)));var x=Utility.getPageUrl(this.webPageAsObject.url),P=Utility.parseQueryStr(x);if("1"==P.redirect||~x.indexOf("redirect=1")){var k=CwZ("body").find('form[name="frmLogin"]');if(k&&k.length>0){var U=f.replace("abs/","full/")+"#"+Base64.encode(d+"@@@0");k.find("[name='redirectUri']").attr("value",U)}var L=CwZ("body").find("ul.externalLogin a");if(L)for(var D=encodeURIComponent("/doi/full/"+c+"#")+Base64.encode(d+"@@@0"),j=encodeURIComponent("/doi/pdf/"+c+"?redirect=1"),A=0;A<L.length;A++)L[A].href=L[A].href.replace(j,D)}}catch(O){Utility.log(O)}else if(a.isSearchingPage())try{var I=".bd",_=a.webPageAsObject?parsedHtml.find(I):CwZ(I);_.has('input[name="doi"]').each(function(t){function a(e){var t=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./),a=navigator.userAgent.indexOf("MSIE")>0?!0:!1,i=a||t?"btns_bold_face-IE":"btns_bold_face";if(/cogentoa/.test(r)){var n='<a class="showDownloadPopup" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a>',l=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0");g=g.find(".access");var o=CwZ(g).find(".pdf").eq(0).text(),d=CwZ(g).find(".pdf").get(0);n=n.replace("@@btntext@@",o),n=n.replace("@@pdfLink@@",l),CwZ(g).append(n),CwZ(g).find(".showDownloadPopup").data("metadata",e),CwZ(d).remove()}else{var n='<div class="showDownloadPopup-detail'+i+'"><a class="showDownloadPopup pdf" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',l=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0"),o=CwZ(g).find(".pdf").text(),d=(CwZ(g).find(".pdf").index(),CwZ(g).find(".pdf"));n=n.replace("@@btntext@@",o),n=n.replace("@@pdfLink@@",l),CwZ(n).insertBefore(d),CwZ(g).find(".showDownloadPopup").data("metadata",e),CwZ(d).remove();var s=g.find(".filesLinks");n='<div class="showDownloadPopup-detail'+i+'"><a class="showDownloadPopup" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',o=CwZ(s).find(".firstEntryLink a").text(),d=CwZ(s).find(".firstEntryLink a"),n=n.replace("@@btntext@@",o),n=n.replace("@@pdfLink@@",l),CwZ(s).find(".firstEntryLink").append(n),CwZ(s).find(".showDownloadPopup").data("metadata",e),CwZ(d).remove()}}var l="",o="",d="",s="",f="",c="",p="",w="",u="",h="",C="",g=CwZ(this),m=g.find("a.searchResultJournal").attr("href").replace("/toc/","").replace("/journal/","");m=-1==m.lastIndexOf("/")?m:m.substr(0,m.lastIndexOf("/")),l=Utility.trim(g.find(".resultTitle a").text()),o=g.find(".accessmodule").hasClass("access_free"),d=g.find(".author a").map(function(){return Utility.trim(CwZ(this).text())}).get().join("; "),w=Utility.selectorAttributeGetter('input[name="doi"]',"value",g),u="doi";var b=(CwZ(g).find(".pdf").attr("href").indexOf("http")>-1?"":n)+CwZ(g).find(".pdf").attr("href");b=b.split("#")[0].replace("/abs/","/pdf/"),f=b,c=b.replace("/doi/pdf/","/doi/abs/"),p=b.replace("/doi/pdf/","/doi/ref/"),h=n+"/action/downloadCitation?doi="+encodeURIComponent(w)+"&include=ref&direct=true&format=ris&submit=Download+article+citation+data",C="ris",T=Utility.trim(g.find("a.searchResultJournal").text()),s=new Date(g.find("p:contains(Published online:):first").text().split("Published online:")[1]).getFullYear();var Z=new CWMetaData({title:l,authors:d,identifier:w,identifierType:u,pubLink:c,refLink:p,pdfLink:f,dataUrl:h,year:s,type:C,journal:T,listingPage:!0,openaccess:o});i.push(Z);var v=g.find(".showDownloadPopup,.cw-btnContainer");0==v.length&&(/tandfonlinecom/.test(r)||/tandfqaliteratumonlinecom/.test(r)||/tandftestliteratumonlinecom/.test(r)?Utility.filter(n,m,"informaworld")&&(g.find(".access:first .accessIconWrapper").before(e.addButton({pdfUrl:f,index:t,inline:!0,"class":" tandf-list tip_bm",buttonCB:a,metaData:Z})),""==f&&g.find("a.cw-openPdfReader").hide(),g.find(".cw-btnContainer").data("metadata",Z)):(g.find(".access:first .accessIconWrapper").before(e.addButton({pdfUrl:f,index:t,inline:!0,"class":" tandf-list tip_bm"})),""==f&&g.find("a.cw-openPdfReader").hide(),g.find(".cw-btnContainer").data("metadata",Z)))})}catch(O){Utility.log(O)}else if(a.isListingPage())try{var T=Utility.trim(CwZ("h1.topArticleMetaTitle").text()),C=CwZ("#breadcrumb a:contains('List of Issues')").attr("href");if(C&&(C=C.replace("/loi/","")),CwZ(".bodyFooterContent .left").find('b:contains("ISSN")').length)var $=Utility.trim(CwZ(".bodyFooterContent .left").find('b:contains("ISSN")').parent().text().replace(/(\r\n|\n|\r)/gm,"").replace(/.*(\w{4}-\w{4}).*/,"$1")||"");$&&($=Utility.formatIssn($));var _=CwZ(".article").has('input[name="doi"]').length>0?CwZ(".article").has('input[name="doi"]'):CwZ(".topArticleDisplay");_.each(function(t){function a(e){var t=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./),a=navigator.userAgent.indexOf("MSIE")>0?!0:!1,i=a||t?"btns_bold_face-IE":"btns_bold_face",n='<div class="showDownloadPopup-detail'+i+'"><a class="showDownloadPopup pdf" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',r=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0"),l=CwZ(g).find(".pdf").text(),o=(CwZ(g).find(".pdf").index(),CwZ(g).find(".pdf"));n=n.replace("@@btntext@@",l),n=n.replace("@@pdfLink@@",r),CwZ(n).insertBefore(o),CwZ(g).find(".showDownloadPopup").data("metadata",e),CwZ(o).remove()}var l="",o="",d="",s="",f="",c="",p="",w="",u="",h="",g=CwZ(this);o=g.find(".accessmodule").hasClass("access_free"),l=Utility.trim(g.find(".entryTitle h3").text())||Utility.trim(g.find(".entryTitle h4").text());var m=g.find("h4 a").length>0?g.find("h4 a"):g.find(".entryAuthor");d=m.map(function(){return Utility.trim(CwZ(this).text())}).get().join("; "),p=g.find('input[name="doi"]').length?Utility.selectorAttributeGetter('input[name="doi"]',"value",g):g.find("a.entryTitle").attr("href").replace(/.*doi\/full\/(.*)/,"$1"),w="doi";var b=(CwZ(g).find(".pdf").attr("href").indexOf("http")>-1?"":n)+CwZ(g).find(".pdf").attr("href");b=b.split("#")[0].replace("/abs/","/pdf/"),s=b,f=b.replace("/doi/pdf/","/doi/abs/"),c=b.replace("/doi/pdf/","/doi/ref/"),u=n+"/action/downloadCitation?doi="+encodeURIComponent(p)+"&include=ref&direct=true&format=ris&submit=Download+article+citation+data",h="ris";var Z=new CWMetaData({title:l,authors:d,identifier:p,identifierType:w,pubLink:f,refLink:c,pdfLink:s,dataUrl:u,type:h,listingPage:!0,issn:$,journal:T,openaccess:o});i.push(Z);var v=g.find(".showDownloadPopup,.cw-btnContainer");0==v.length&&(/tandfonlinecom/.test(r)||/tandfqaliteratumonlinecom/.test(r)||/tandftestliteratumonlinecom/.test(r)?Utility.filter(n,C,"informaworld")&&(g.find(".access:first .accessIconWrapper ").before(e.addButton({pdfUrl:s,index:t,inline:!0,"class":" tandf-list tip_bm",buttonCB:a,metaData:Z})),""==s&&g.find("a.cw-openPdfReader").hide(),g.find(".cw-btnContainer").data("metadata",Z)):(g.find(".access:first .accessIconWrapper ").before(e.addButton({pdfUrl:s,index:t,inline:!0,"class":" tandf-list tip_bm"})),""==s&&g.find("a.cw-openPdfReader").hide(),g.find(".cw-btnContainer").data("metadata",Z)))})}catch(O){Utility.log(O)}e.success(i)},getData:function(e){return Utility.getData(e)},extractHTML:function(e,t){try{var a="",i="",n="",r="",l="",o="",d="",s="",f="",c="",p="",w="",u="",h="",C="",g="",m="",b="",Z="",v="",y="",x=this.webPageAsObject?this.webPageAsObject.html.find(e.target):CwZ(e.target),P=x.find("#journal_content #unit2");v=Utility.trim(P.find(".gutter table tr:first td:first h2").text());var k=Utility.trim(P.find(".gutter table tr:first td:first h3").text());k=k.split(",");for(var U=0;U<k.length;U++){var L=Utility.trim(k[U]).toLowerCase().split(" ");switch(L[0]){case"volume":u=L[1];break;case"issue":h=L[1];break;default:c=Utility.trim(k[U])}}for(var D=P.find(".doiMeta > a"),U=0;U<D.length;U++)r+=Utility.trim(D[U].text)+" ; ";p=Utility.trim(P.find(".gutter .last").text());var j=P.find(".doiMeta > p").text();j=j.split(" "),j&&"2"==j.length&&(pages=j[1],g=pages.replace(/^([\d]+)-([\d]+)/,"$1"),m=pages.replace(/^([\d]+)-([\d]+)/,"$2"))}catch(A){Utility.log(A)}return{title:t.title,isedited:i,author:t.authors,series_name:l,publisher:o,keywords:d,handle:s,year:c,date:f,description:p,redif_type:w,volume:u,issue:h,number:C,page_start:g,page_end:m,edition:b,book_editor:Z,book_title:v,chapter:y,url:t.pubLink,placeofpublication:n,identifier:t.identifier,isbn:a,doi:"doi"==t.identifierType?t.identifier:""}},getSupplementalContent:function(){function e(){var e=CwZ.Deferred();return CwZ("#supplementaryPanel").length>0?0==CwZ("#supplementaryPanel").html().trim().length?CwZ.get(CwZ("#supplementaryTab a").attr("href")).success(function(t){e.resolve(t)}):e.resolve(CwZ("#supplementaryPanel")):e.resolve([]),e.promise()}function t(){var e=CwZ.Deferred();return CwZ("#figuresTablesPanel").length>0?0==CwZ("#figuresTablesPanel").html().trim().length?CwZ.get(CwZ("#figuresTablesTab a").attr("href")).success(function(t){e.resolve(t)}):e.resolve(CwZ("#figuresTablesPanel")):e.resolve([]),e.promise()}function a(e){return e.replace(/\(.*KB.*/g,"").trim()}var i={},n=CwZ.Deferred();try{e().done(function(e){e=CwZ(e),e.length>0&&(i.files={},e.find(".SupplDownload a").each(function(){var e=CwZ(this);if("#"!=e.attr("href"))try{var t=a(e.text().trim());if(i.files[t]){var n=/\((\d+)\)/g,r=n.exec(t);if(r&&r.length>0){var l=parseInt(r[1]);t=t.replace(n,"("+l+"1)")}else t+="(1)"}i.files[t]=e.attr("href")}catch(o){}})),t().done(function(e){e=CwZ(e),e.length>0&&(i.figures={},e.find(".figureDownloadOptions a").each(function(){var e=CwZ(this);if("#"!=e.attr("href"))try{var t=a(e.text().trim());if(i.figures[t]){var n=/\((\d+)\)/g,r=n.exec(t);if(r&&r.length>0){var l=parseInt(r[1]);t=t.replace(n,"("+l+"1)")}else t+="(1)"}i.figures[t]=e.attr("href")}catch(o){}})),n.resolve(i)})})}catch(r){n.reject(i)}return n.promise()},getDetails:function(){var e={};try{var t=CWDataCenter.pubSelected;if(e.title=CwZ(".description h1").text()||atob(t.title),e.authors=t.authors.replace(/;/g,","),!t.listingPage){var a=document.domain.replace(/[\.-]/g,"");if(/cogentoa/.test(a))e.abs=CwZ("#abstract").next().text(),e.keywords="<ul class='keywords'>",CwZ(".articleKeywords li").each(function(){e.keywords+="<li>"+CwZ(this).find("a").parent().html().trim()+",</li>"}),e.keywords+="</ul>",e.keywords=CwZ(e.keywords.replace(/(.*),(.*)$/,"$1$2"));else{var i=CwZ(".abstract .bd .gutter");e.abs=i.find(".paragraph").text(),e.keywords=i.find(".keywords")}}}catch(n){}return e}};
//# sourceMappingURL=../../../sourcemaps/js/extraction/informaworld.js.map
