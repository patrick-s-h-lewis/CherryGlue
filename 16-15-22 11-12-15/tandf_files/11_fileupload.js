var CWFileUpload={euId:null,fileId:null,fileObj:null,fileData:null,fileURL:"",blobLink:"",index:"",syncStatus:0,upload:function(b,a,c){CWFileUpload.fileURL=b;CWFileUpload.index=a;CWFileUpload.initPlugin();c?(CWFileUpload.blobLink=c,CWFileUpload.getFile(c)):CWFileUpload.getFile(b)},getFile:function(b){try{var a=new XMLHttpRequest;a.open("GET",b,!0);a.responseType="blob";a.onload=function(a){200==this.status?(a=this.response,CwZ("#cw-fileUpload").fileupload("add",{files:[a]}),CWFileUpload.postFile()):
0==this.status&&CWFileUpload.getFile(CWFileUpload.fileURL)};a.send()}catch(c){CWPDFReaderConfig.isCoreMode()?PDFRaven.captureException(c.stack):CwZ(document).trigger("cwExcToSentry",c)}},postFile:function(){var b=(new Date).getTime(),a=CWFileUpload.fileObj;void 0==a.size&&(a.size=0);void 0==a.name&&(a.name=b+".pdf");b={os:1,enc:1,title:a.name,size:a.size,mts:b,refId:CWFileUpload.euId,eId:CWFileUpload.fileId};try{CWPDFReader.getUploadParams(b)}catch(c){CWPDFReaderConfig.isCoreMode()?PDFRaven.captureException(c.stack):
CwZ(document).trigger("cwExcToSentry",c)}},initPlugin:function(){try{if(0==CwZ("#cw-fileUpload").length||CWPDFReaderConfig.readerMode==CWPDFReaderMode.Webimporter&&1==CwZ("#cw-fileUpload").length)CwZ("<a></a>").attr("id","cw-fileUpload").appendTo("body"),CwZ("#cw-fileUpload").fileupload({limitMultiFileUploads:1,formData:CWFileUpload.postParam,paramName:"file",singleFileUploads:!1,autoUpload:!0,maxFileSize:26214400,minFileSize:1,add:CWFileUpload.getFileDetails,progress:CWFileUpload.uploadProgress,
done:function(a,b){0==CWFileUpload.syncStatus?CWPDFReader.failureHandler({type:"uploadfile",index:CWFileUpload.index}):(CWFileUpload.syncStatus=2,CWFileUpload.uploadSync(CWFileUpload.syncStatus),CWFileUpload.syncStatus=0)}}).off("fileuploadstart").on("fileuploadstart",function(a){CWFileUpload.syncStatus=1;CWFileUpload.uploadSync(CWFileUpload.syncStatus)}).off("fileuploadfail").on("fileuploadfail",function(a){CWFileUpload.syncStatus=0}).off("fileuploadstop").on("fileuploadstop",function(a){}).off("fileuploadalways").on("fileuploadalways",
function(a,b){})}catch(b){CWPDFReaderConfig.isCoreMode()?PDFRaven.captureException(b.stack):CwZ(document).trigger("cwExcToSentry",b)}},getFileDetails:function(b,a){var c=a.files[0];c&&(CWFileUpload.fileObj=c,CWFileUpload.fileData=a)},uploadSync:function(b){CWPDFReader.uploadSync({eId:CWFileUpload.fileId,os:2,sync:b,fileURL:CWFileUpload.fileURL,index:CWFileUpload.index})},uploadProgress:function(b,a){}};
